{% extends base %}

{% block preamble %}

<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<style>
    .plot-tooltip {
        margin: 10px;
    }
</style>

{% endblock %}

{% block contents %}

<div class="container">
    <!-- Header -->
    <div class="row my-4">
        <div class="col-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="209.621" height="50" viewBox="0 0 209.621 50"><g transform="translate(10.153 0)"><path d="M280.686,329.621V337.3h1.744v-7.683Zm10.242,7.683V334.99c0-1.254-.023-2.337-.068-3.351l.034-.012a28.5,28.5,0,0,0,1.334,2.713l1.641,2.964h1.824v-7.683h-1.6v2.246a28.616,28.616,0,0,0,.148,3.2h-.034a22.261,22.261,0,0,0-1.254-2.633l-1.6-2.816h-2.029V337.3Zm11.371-.354a5.025,5.025,0,0,0,2.177.468c2.109,0,3.1-1.095,3.1-2.382,0-1.083-.638-1.79-1.995-2.291-.992-.376-1.425-.593-1.425-1.083,0-.4.365-.741,1.117-.741a3.654,3.654,0,0,1,1.607.365l.388-1.4a4.7,4.7,0,0,0-1.961-.388c-1.812,0-2.907,1-2.907,2.314,0,1.117.832,1.824,2.109,2.269.923.33,1.288.6,1.288,1.083,0,.5-.422.832-1.22.832a4.427,4.427,0,0,1-1.926-.479l-.354,1.436Zm13.331.354h1.744V331.08h2.1v-1.459h-5.9v1.459h2.063V337.3Zm10.163-7.683V337.3h1.744v-7.683Zm10.128,7.683h1.744V331.08h2.1v-1.459h-5.9v1.459h2.063V337.3Zm10.151-7.683v4.286c0,2.451,1.14,3.522,3.078,3.522,2.006,0,3.2-1.128,3.2-3.5v-4.309h-1.733v4.422c0,1.357-.5,1.995-1.414,1.995-.889,0-1.39-.673-1.39-1.995v-4.422Zm14.665,7.683h1.744V331.08h2.1v-1.459h-5.9v1.459h2.063V337.3Zm14.734-4.662h-2.827v-1.6h3v-1.425H370.9V337.3h4.9v-1.425h-3.158v-1.824h2.827v-1.413Zm11.519,4.662h1.744v-3.089h2.759V332.8h-2.759v-1.755h2.952v-1.425h-4.7V337.3Zm14.791-7.808a3.719,3.719,0,0,0-3.739,4.024c0,2.189,1.333,3.91,3.613,3.91,2.246,0,3.773-1.527,3.773-4.047a3.581,3.581,0,0,0-3.648-3.887Zm-.046,1.379c1.2,0,1.858,1.185,1.858,2.565,0,1.493-.672,2.61-1.846,2.61s-1.869-1.06-1.869-2.565.684-2.61,1.858-2.61Zm10.231,6.429h1.721v-3.021h.525c.706.011,1.037.273,1.242,1.231a9.611,9.611,0,0,0,.536,1.79h1.778c-.148-.3-.387-1.3-.627-2.166a1.938,1.938,0,0,0-1.026-1.436v-.034a2.039,2.039,0,0,0,1.357-1.892,1.951,1.951,0,0,0-.707-1.607,3.92,3.92,0,0,0-2.485-.6,15.282,15.282,0,0,0-2.314.159v7.58Zm1.721-6.4a4.333,4.333,0,0,1,.787-.057c.8.012,1.276.365,1.276,1.072,0,.673-.513,1.105-1.379,1.105h-.684Z" transform="translate(-218.301 -316.908)" fill="#ec7404" fill-rule="evenodd"/><path d="M157.127,332.331l8.417-8.417a12.909,12.909,0,0,0-18.256-18.256l-7.55,7.55h7.328a1.674,1.674,0,0,1,1.669,1.669h0a1.673,1.673,0,0,1-1.669,1.669H136.4l-3.783,3.784h0l-1.224,1.224,3.041,3.041,1.967,1.967h10.666a1.674,1.674,0,0,1,1.669,1.669h0a1.674,1.674,0,0,1-1.669,1.669h-7.328l1.073,1.073.576.577a1.673,1.673,0,0,1,0,2.36h0a1.673,1.673,0,0,1-2.36,0l-.577-.576h0l-6.378-6.378h0l-4.221-4.221h0l-.03-.031h0l-.029-.031h0l-.028-.032h0l-.027-.032h0l-.026-.033h0l-.025-.033h0l-.024-.034h0l-.023-.034h0l-.022-.035h0l-.021-.035h0l-.02-.035h0l-.019-.036h0l-.018-.037h0l-.018-.037h0l-.017-.037h0l-.015-.037h0l-.015-.038h0l-.014-.038h0l-.013-.038h0c-.009-.026-.016-.052-.023-.078h0l-.01-.039h0l-.009-.039h0l-.008-.039h0l-.007-.039h0c0-.026-.009-.053-.011-.08h0l0-.04h0c0-.027,0-.053-.006-.08l0-.04h0v-.04h0v-.04h0c0-.027,0-.054,0-.08h0l0-.04h0l0-.04h0l.005-.039h0l.006-.04.007-.039h0c.005-.026.011-.053.017-.079l.01-.039h0l.011-.039c.007-.026.015-.052.024-.077l.014-.038h0l.015-.038c.01-.025.021-.05.032-.075h0l.018-.037h0l.019-.037h0l.02-.036h0l.02-.035h0l.022-.035.022-.035.024-.035.024-.034.025-.033.026-.033h0l.027-.032.028-.032h0l.029-.031.03-.031h0l12.491-12.491,0,0,4.582-4.582A16.247,16.247,0,0,1,167.9,326.275L149.281,344.9h0l-3.174,3.174a1.674,1.674,0,0,1-2.36,0h0a1.673,1.673,0,0,1,0-2.36l13.37-13.37Z" transform="translate(-127.364 -298.558)" fill="#ec7404" fill-rule="evenodd"/></g><path d="M289.422,370.3a6.619,6.619,0,0,1-2.206.382,3.848,3.848,0,0,1-.017-7.694,5.714,5.714,0,0,1,2.223.434l.538-2.1a6.905,6.905,0,0,0-2.883-.521c-3.543,0-6.391,2.223-6.391,6.218,0,3.334,2.084,5.853,6.131,5.853a7.55,7.55,0,0,0,3-.5l-.4-2.067Zm8.389-.608.9,3h2.848l-3.63-11.706h-3.473l-3.578,11.706h2.744l.834-3Zm-2.97-1.98.695-2.484c.191-.677.365-1.563.538-2.257h.035c.174.695.382,1.563.591,2.257l.729,2.484Zm8.284,4.984h2.622v-4.6h.8c1.077.018,1.58.417,1.893,1.876a14.652,14.652,0,0,0,.816,2.727h2.709c-.226-.451-.59-1.98-.955-3.3a2.952,2.952,0,0,0-1.563-2.189v-.052a3.106,3.106,0,0,0,2.067-2.883,2.971,2.971,0,0,0-1.077-2.449,5.972,5.972,0,0,0-3.786-.92,23.291,23.291,0,0,0-3.526.243v11.55Zm2.622-9.743a6.616,6.616,0,0,1,1.2-.087c1.216.017,1.945.556,1.945,1.633,0,1.025-.782,1.685-2.1,1.685h-1.042v-3.23Zm7.676,9.691a22.989,22.989,0,0,0,3,.173,8.4,8.4,0,0,0,5.4-1.511,5.937,5.937,0,0,0,1.945-4.741,5.18,5.18,0,0,0-1.98-4.412A7.532,7.532,0,0,0,317,360.9a23.649,23.649,0,0,0-3.578.243v11.5Zm2.657-9.6a5.508,5.508,0,0,1,1.2-.1,3.358,3.358,0,0,1,3.682,3.717c0,2.8-1.563,4.117-3.96,4.1a4.874,4.874,0,0,1-.92-.052v-7.659Zm9.43-2.049v11.706h2.657V360.987Zm10.108-.191c-3.456,0-5.7,2.622-5.7,6.131,0,3.334,2.032,5.957,5.506,5.957,3.421,0,5.749-2.327,5.749-6.166,0-3.23-1.962-5.922-5.558-5.922Zm-.07,2.1c1.824,0,2.831,1.806,2.831,3.908,0,2.275-1.025,3.977-2.814,3.977-1.772,0-2.848-1.615-2.848-3.908,0-2.275,1.042-3.977,2.831-3.977Zm17.142,3.091h-4.359v2.067h1.806V370.5a3.817,3.817,0,1,1-1.112-7.451,6.485,6.485,0,0,1,2.727.5l.556-2.119a8.059,8.059,0,0,0-3.247-.573c-3.839,0-6.669,2.223-6.687,6.113a5.665,5.665,0,0,0,1.65,4.255,6.524,6.524,0,0,0,4.759,1.58,13.1,13.1,0,0,0,3.908-.66v-6.166Zm9.031-.4h-4.307v-2.432h4.568v-2.171h-7.225v11.706h7.468v-2.171h-4.811v-2.779h4.307V365.59Zm4.741,7.1v-3.525c0-1.911-.035-3.561-.1-5.106l.052-.017a43.571,43.571,0,0,0,2.032,4.134l2.5,4.515h2.779V360.987h-2.431v3.422a43.435,43.435,0,0,0,.225,4.881h-.052a33.866,33.866,0,0,0-1.91-4.012l-2.432-4.29h-3.091v11.706Zm16.517-7.1h-4.307v-2.432h4.568v-2.171h-7.225v11.706h7.469v-2.171h-4.811v-2.779h4.307V365.59Zm4.654,7.1h2.657V363.21h3.2v-2.223h-9v2.223h3.144v9.483Zm7.26-11.706v11.706h2.657V360.987Zm13.147,9.309a6.616,6.616,0,0,1-2.206.382,3.848,3.848,0,0,1-.017-7.694,5.713,5.713,0,0,1,2.223.434l.539-2.1a6.909,6.909,0,0,0-2.883-.521c-3.543,0-6.391,2.223-6.391,6.218,0,3.334,2.084,5.853,6.131,5.853a7.549,7.549,0,0,0,3-.5l-.4-2.067Zm1.685,1.858a7.657,7.657,0,0,0,3.317.712c3.213,0,4.724-1.667,4.724-3.63,0-1.65-.973-2.727-3.039-3.491-1.511-.573-2.171-.9-2.171-1.65,0-.608.556-1.129,1.7-1.129a5.56,5.56,0,0,1,2.449.556l.59-2.137a7.176,7.176,0,0,0-2.987-.59c-2.761,0-4.429,1.528-4.429,3.526,0,1.7,1.268,2.779,3.213,3.456,1.407.5,1.962.92,1.962,1.65,0,.764-.642,1.268-1.858,1.268a6.756,6.756,0,0,1-2.935-.73Z" transform="translate(-208.148 -335.472)" fill="#004b5a" fill-rule="evenodd"/><rect width="2.106" height="48.911" transform="translate(62.813 0.544)" fill="#004b5a"/><path d="M130.127,339.81l-.951.951-2.59,2.589h0l-.031.03h0l-.031.029h0l-.032.028h0l-.032.027h0l-.033.026h0l-.033.025h0l-.034.024h0l-.034.023h0l-.035.022h0l-.035.021h0c-.024.014-.048.027-.072.04h0l-.037.018h0l-.037.017h0c-.024.011-.05.022-.074.032h0l-.038.015h0l-.038.014-.077.025-.039.01h0l-.039.01-.079.017h0l-.039.007-.04.006-.04.005h0l-.04,0h0l-.04,0-.04,0h0l-.04,0h-.08l-.04,0-.04,0-.04,0h0l-.039,0h0l-.039-.005h0l-.04-.006h0l-.039-.007h0l-.039-.008h0l-.039-.009h0l-.039-.01h0l-.039-.011h0l-.039-.012h0l-.038-.013h0l-.038-.014h0l-.038-.015h0l-.037-.016h0l-.037-.017h0l-.037-.018h0l-.036-.018h0l-.036-.019h0l-.036-.021h0l-.035-.021h0l-.035-.022h0l-.035-.023h0l-.034-.024h0l-.033-.025h0l-.033-.026h0l-.032-.027h0l-.032-.028h0l-.031-.029h0l-.031-.03h0l-.005,0-6.072-6.072-7.293-7.293-3.706-3.706a16.247,16.247,0,0,1,20.371-25.093l-2.427,2.427a12.908,12.908,0,0,0-15.584,20.3l3.706,3.706,7.293,7.293,4.9,4.9,1.41-1.409h0l.951-.951,13.39-13.39.837-.837H122.982a1.674,1.674,0,0,1-1.669-1.669h0a1.674,1.674,0,0,1,1.669-1.669h19.012l-6.381-6.381-1.945-1.945a1.674,1.674,0,0,1,0-2.36h0a1.674,1.674,0,0,1,2.36,0l1.945,1.945h0l7.334,7.334,1.891,1.891.005,0h0a1.63,1.63,0,0,1,.165.193h0q.025.034.048.068h0l.022.035h0l.022.035h0l.02.036h0l.02.036h0l.019.036h0c.012.025.024.049.035.074h0l.015.037h0l.015.038.014.038h0l.013.039h0l.012.039.011.039h0l.01.039h0l.009.039h0l.009.039h0l.007.04.006.039.005.04h0l0,.04h0l0,.04,0,.04v.16l0,.04,0,.04h0l0,.04h0l-.005.04-.006.039-.007.039h0l-.009.039h0l-.009.039-.01.039-.011.039-.012.039h0l-.013.039-.014.038h0l-.015.037c-.01.025-.021.05-.032.075h0l-.017.037-.018.036h0l-.02.036h0l-.02.036-.022.035-.022.035-.023.034-.024.034-.025.033-.026.033h0l-.027.033-.028.032h0l-.029.031-.03.031h0l-.808.808L130.127,339.81Zm17.426-18.922c-.011-.025-.022-.049-.035-.074l.035.074Zm-.137-.253c-.015-.023-.031-.046-.048-.068Z" transform="translate(-102.411 -298.558)" fill="#004b5a" fill-rule="evenodd"/></svg>
            <h2>GWAS Navigator</h2>
        </div>
        <div class="col">
            <h4>A tool to visualize GWAS summary statistics for intuitive exploration.</h4>
            <p>GWAS data for coronary artery disease. Annotated with associated phenotypes from GWAS catalog, genomic features from ensembl.org, aligned with scATAC-seq data from CATlas as well as promotor enhancer interactions in form of ABC scores.</p>
        </div>
    </div>

    <!-- Input fields -->
    <div class="row my-2">
        <ul class="nav nav-tabs" id="myTab1" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="snp-tab" data-bs-toggle="tab" data-bs-target="#snp" type="button" role="tab" aria-controls="snp" aria-selected="true">SNP input</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="gene-tab" data-bs-toggle="tab" data-bs-target="#gene" type="button" role="tab" aria-controls="gene" aria-selected="false">Gene input</button>
          </li>
        </ul>

        <div class="tab-content" id="myTabContent1">

            <!-- SNP -->
            <div class="tab-pane fade show active" id="snp" role="tabpanel" aria-labelledby="snp-tab">
                <div class="col">
                    <div class="row"> {{ embed(roots.snp_input) }} </div>
                    <div class="row"> {{ embed(roots.feedback_div) }} </div>
                    <div class="row"> {{ embed(roots.snp_button) }} </div>
                </div>
            </div>

            <!-- Gene -->
            <div class="tab-pane fade" id="gene" role="tabpanel" aria-labelledby="gene-tab">
                <div class="col">
                    <div class="row"> {{ embed(roots.gene_input) }} </div>
                    <div class="row"> {{ embed(roots.gene_div) }} </div>
                    <div class="row"> {{ embed(roots.update_gene_rbutton) }} </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Actual plots & settings -->
    <div class="row my-2">
        <ul class="nav nav-tabs" id="myTab2" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab" aria-controls="settings" aria-selected="false">⚙</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button" role="tab" aria-controls="info" aria-selected="false">INFO</button>
          </li>
        </ul>

        <div class="tab-content" id="myTabContent2">

            <!-- Plots -->
            <div class="tab-pane fade show active" id="plot" role="tabpanel" aria-labelledby="plot-tab">
                <div class="row">
                    {{ embed(roots.plots) }}
                </div>
            </div>

            <!-- ⚙️Settings -->
            <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
                <div class="row">
                    {{ embed(roots.pop_select) }}
                    <div class="col -3">
                        <h4>CATlas tracks</h4>
                        {{ embed(roots.catlas_select) }}
                    </div>
                    <div class="col -3">
                        <h4>scATAC-seq tracks</h4>
                        {{ embed(roots.atac_seq_select) }}
                    </div>
                    <div class="col -3">
                        <h4>ABC tracks</h4>
                        {{ embed(roots.abc_select) }}
                    </div>
                </div>
            </div>

            <!-- Info -->
            <div class="tab-pane fade" id="info" role="tabpanel" aria-labelledby="info-tab">
                Some info on the plot.
            </div>
        </div>
    </div>

</div>

{% endblock %}